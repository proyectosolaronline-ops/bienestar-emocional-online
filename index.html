<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Bienestar Emocional</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root {
            --rosa-claro: #FFE5F0;
            --rosa-medio: #FFB6D9;
            --rosa-intenso: #FF85C0;
            --morado-claro: #E8D5FF;
            --morado-medio: #C5A3FF;
            --morado-intenso: #A67FFF;
            --texto-oscuro: #2D2A3D;
            --texto-medio: #5A5570;
            --blanco: #FFFFFF;
            --whatsapp: #25D366;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; font-size: 16px; color: var(--texto-oscuro); line-height: 1.6; background: linear-gradient(135deg, var(--rosa-claro) 0%, var(--morado-claro) 100%); padding-bottom: 80px; }
        header { background: var(--blanco); padding: 1.5rem 1rem; text-align: center; box-shadow: 0 4px 20px rgba(197,163,255,0.2); animation: slideDown 0.6s ease-out; }
        @keyframes slideDown { from { opacity:0; transform:translateY(-30px); } to { opacity:1; transform:translateY(0); } }
        .logo { max-width: 150px; height: auto; margin: 0 auto 0.8rem; display: block; border-radius: 12px; box-shadow: 0 4px 16px rgba(166,127,255,0.2); }
        h1 { font-family: 'Outfit', sans-serif; font-size: 1.8rem; color: var(--morado-intenso); margin-bottom: 0.5rem; font-weight: 700; }
        header p { color: var(--texto-medio); font-size: 0.95rem; }
        @keyframes fadeInUp { from { opacity:0; transform:translateY(40px); } to { opacity:1; transform:translateY(0); } }
        .hero { background: var(--blanco); padding: 2rem 1.5rem; margin: 1.5rem 1rem; border-radius: 20px; box-shadow: 0 8px 32px rgba(197,163,255,0.15); animation: fadeInUp 0.8s ease-out; animation-delay:0.1s; animation-fill-mode:both; }
        .section { background: var(--blanco); padding: 2rem 1.5rem; margin: 1.5rem 1rem; border-radius: 20px; box-shadow: 0 8px 32px rgba(197,163,255,0.15); animation: fadeInUp 0.8s ease-out; animation-fill-mode:both; }
        h2 { font-family: 'Outfit', sans-serif; font-size: 1.6rem; color: var(--morado-intenso); margin-bottom: 1.5rem; text-align: center; position: relative; display: inline-block; width: 100%; }
        h2::after { content:''; position:absolute; bottom:-8px; left:50%; transform:translateX(-50%); width:80px; height:4px; background:linear-gradient(90deg, var(--rosa-intenso), var(--morado-medio)); border-radius:2px; }
        .servicios-buttons { display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin: 2rem 0; }
        .service-card { background: var(--blanco); border-radius: 16px; overflow: hidden; box-shadow: 0 8px 24px rgba(197,163,255,0.2); transition: all 0.3s ease; cursor: pointer; }
        .service-card:active { transform:translateY(-5px); box-shadow:0 12px 32px rgba(197,163,255,0.35); }
        .service-card-image { width: 100%; height: 200px; object-fit: cover; object-position: center center; background: linear-gradient(135deg, var(--rosa-claro), var(--morado-claro)); display: block; margin: 0 auto; }
        .service-card-content { padding:1.5rem; text-align:center; }
        .service-card-title { font-family:'Outfit',sans-serif; font-size:1.3rem; color:var(--morado-intenso); margin-bottom:1rem; font-weight:600; }
        .service-card-button { display:inline-block; background:linear-gradient(135deg, var(--rosa-intenso), var(--morado-intenso)); color:var(--blanco); padding:0.8rem 2rem; border-radius:50px; font-family:'Outfit',sans-serif; font-size:1rem; font-weight:600; border:none; cursor:pointer; transition:all 0.3s ease; box-shadow:0 4px 12px rgba(197,163,255,0.4); }
        .service-card-button:active { transform:scale(0.98); }
        .badge-eval { display:inline-block; background:linear-gradient(135deg, var(--rosa-intenso), var(--morado-intenso)); color:white; font-size:0.75rem; font-family:'Outfit',sans-serif; font-weight:700; padding:0.25rem 0.8rem; border-radius:50px; margin-bottom:0.7rem; letter-spacing:0.05em; text-transform:uppercase; }
        .modal { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; background:rgba(45,42,61,0.9); backdrop-filter:blur(8px); overflow-y:auto; -webkit-overflow-scrolling:touch; }
        .modal-content { background:var(--blanco); margin:5% auto; padding:2rem 1.5rem; border-radius:20px; max-width:95%; width:500px; box-shadow:0 20px 60px rgba(0,0,0,0.3); animation:slideUp 0.4s ease-out; position:relative; max-height:90vh; overflow-y:auto; }
        @keyframes slideUp { from { opacity:0; transform:translateY(60px) scale(0.9); } to { opacity:1; transform:translateY(0) scale(1); } }
        .modal-image { width: 100%; max-height: 250px; object-fit: cover; object-position: center center; border-radius: 12px; margin: 0 auto 1.5rem; box-shadow: 0 4px 16px rgba(197,163,255,0.2); display: block; }
        .close { position:absolute; right:1.5rem; top:1.5rem; color:var(--texto-medio); font-size:2rem; font-weight:bold; cursor:pointer; line-height:1; transition:all 0.3s ease; width:35px; height:35px; display:flex; align-items:center; justify-content:center; border-radius:50%; z-index:10; }
        .close:active { background:var(--rosa-claro); color:var(--rosa-intenso); transform:rotate(90deg); }
        .modal h3 { font-family:'Outfit',sans-serif; font-size:1.5rem; color:var(--morado-intenso); margin:0 0 1.5rem; padding-right:2.5rem; line-height:1.3; }
        .modal p { font-size:0.95rem; margin-bottom:1.2rem; line-height:1.7; }
        .modal ul { padding-left:1.5rem; margin-bottom:1.2rem; }
        .modal li { margin-bottom:0.8rem; line-height:1.6; font-size:0.9rem; }
        .modal strong { color:var(--morado-intenso); font-weight:600; }
        .cta-button { display:block; background:linear-gradient(135deg, var(--rosa-intenso), var(--morado-intenso)); color:var(--blanco); padding:1rem 2rem; border-radius:50px; text-decoration:none; font-family:'Outfit',sans-serif; font-size:1.1rem; font-weight:600; margin-top:1rem; transition:all 0.3s ease; box-shadow:0 4px 16px rgba(197,163,255,0.4); text-align:center; }
        .cta-button:active { transform:scale(0.98); }
        .modal-section-label { font-family:'Outfit',sans-serif; font-size:1rem; font-weight:700; color:var(--morado-intenso); background:linear-gradient(135deg, var(--rosa-claro), var(--morado-claro)); border-radius:8px; padding:0.5rem 1rem; margin:1.2rem 0 0.8rem; display:block; }
        .eval-areas-grid { display:grid; grid-template-columns:1fr 1fr; gap:0.6rem; margin:1rem 0 1.2rem; }
        .eval-area-item { background:linear-gradient(135deg, var(--rosa-claro), var(--morado-claro)); border-radius:10px; padding:0.7rem 0.9rem; font-size:0.85rem; font-weight:600; color:var(--morado-intenso); font-family:'Outfit',sans-serif; text-align:center; border-left:3px solid var(--morado-intenso); }
        .modal-loading { text-align:center; padding:3rem 1rem; }
        .modal-loading .spinner { width:48px; height:48px; border:5px solid var(--morado-claro); border-top-color:var(--morado-intenso); border-radius:50%; animation:spin 0.8s linear infinite; margin:0 auto 1rem; }
        @keyframes spin { to { transform:rotate(360deg); } }
        .modal-loading p { color:var(--texto-medio); font-family:'Outfit',sans-serif; }
        /* ‚îÄ‚îÄ DISPONIBILIDAD ‚îÄ‚îÄ */
        .disp-section { background:linear-gradient(135deg,#fff 0%,#fdf8ff 100%); padding:2rem 1.5rem; margin:1.5rem 1rem; border-radius:20px; box-shadow:0 8px 32px rgba(197,163,255,0.18); animation:fadeInUp 0.8s ease-out; animation-fill-mode:both; border:1.5px solid var(--morado-claro); }
        .disp-badge-nuevo { display:inline-flex; align-items:center; gap:.4rem; background:linear-gradient(135deg,var(--rosa-intenso),var(--morado-intenso)); color:#fff; font-family:'Outfit',sans-serif; font-size:.72rem; font-weight:700; padding:.2rem .75rem; border-radius:50px; letter-spacing:.06em; text-transform:uppercase; margin-bottom:.8rem; animation:pulse-badge 2s infinite; }
        @keyframes pulse-badge { 0%,100%{box-shadow:0 0 0 0 rgba(166,127,255,.4);}50%{box-shadow:0 0 0 8px rgba(166,127,255,0);} }
        .disp-subtitulo { text-align:center; color:var(--texto-medio); font-size:.95rem; margin-bottom:1.5rem; margin-top:.3rem; }
        .disp-slots-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:.75rem; margin-bottom:1rem; }
        .disp-slot-card { background:linear-gradient(135deg,var(--rosa-claro),var(--morado-claro)); border:1.5px solid var(--morado-medio); border-radius:14px; padding:.9rem .7rem; text-align:center; cursor:pointer; transition:all .25s ease; position:relative; overflow:hidden; }
        .disp-slot-card::before { content:''; position:absolute; inset:0; background:linear-gradient(135deg,var(--rosa-intenso),var(--morado-intenso)); opacity:0; transition:opacity .25s; border-radius:13px; }
        .disp-slot-card:hover::before,.disp-slot-card:active::before { opacity:1; }
        .disp-slot-card:hover .dsc-dia,.disp-slot-card:active .dsc-dia,
        .disp-slot-card:hover .dsc-fecha,.disp-slot-card:active .dsc-fecha,
        .disp-slot-card:hover .dsc-mes,.disp-slot-card:active .dsc-mes,
        .disp-slot-card:hover .dsc-hora,.disp-slot-card:active .dsc-hora,
        .disp-slot-card:hover .dsc-nota,.disp-slot-card:active .dsc-nota { color:#fff !important; }
        .disp-slot-card:active { transform:scale(.96); }
        .dsc-dia  { font-family:'Outfit',sans-serif; font-size:.68rem; font-weight:700; color:var(--texto-medio); text-transform:uppercase; letter-spacing:.07em; position:relative; z-index:1; }
        .dsc-fecha{ font-family:'Outfit',sans-serif; font-size:1.35rem; font-weight:800; color:var(--morado-intenso); line-height:1.1; position:relative; z-index:1; }
        .dsc-mes  { font-family:'Outfit',sans-serif; font-size:.72rem; font-weight:600; color:var(--texto-medio); position:relative; z-index:1; }
        .dsc-hora { font-size:.78rem; font-weight:700; color:var(--morado-intenso); margin-top:.35rem; position:relative; z-index:1; }
        .dsc-nota { font-size:.65rem; color:var(--texto-medio); margin-top:.2rem; position:relative; z-index:1; line-height:1.3; }
        .disp-loading { text-align:center; padding:2rem; color:var(--texto-medio); font-size:.9rem; }
        .disp-empty  { text-align:center; padding:1.5rem; color:var(--texto-medio); font-size:.9rem; line-height:1.8; }
        /* ‚îÄ‚îÄ MODAL SOLICITUD ‚îÄ‚îÄ */
        .sol-overlay { display:none; position:fixed; inset:0; z-index:2000; background:rgba(45,42,61,0.92); backdrop-filter:blur(8px); overflow-y:auto; -webkit-overflow-scrolling:touch; }
        .sol-overlay.show { display:block; }
        .sol-box { background:var(--blanco); margin:4% auto; padding:2rem 1.5rem 2.5rem; border-radius:22px; max-width:95%; width:480px; box-shadow:0 24px 64px rgba(0,0,0,0.35); animation:slideUp .4s ease-out; position:relative; }
        .sol-close { position:absolute; right:1.2rem; top:1.2rem; background:none; border:none; font-size:1.6rem; cursor:pointer; color:var(--texto-medio); width:34px; height:34px; display:flex; align-items:center; justify-content:center; border-radius:50%; transition:all .2s; }
        .sol-close:active { background:var(--rosa-claro); transform:rotate(90deg); }
        .sol-titulo { font-family:'Outfit',sans-serif; font-size:1.3rem; font-weight:800; color:var(--morado-intenso); margin-bottom:.3rem; padding-right:2rem; }
        .sol-subtitulo { font-size:.85rem; color:var(--texto-medio); margin-bottom:1.4rem; }
        .sol-slot-resumen { background:linear-gradient(135deg,var(--rosa-claro),var(--morado-claro)); border-radius:12px; padding:.75rem 1rem; margin-bottom:1.2rem; display:flex; align-items:center; gap:.7rem; }
        .sol-slot-ico { font-size:1.4rem; flex-shrink:0; }
        .sol-slot-info { font-family:'Outfit',sans-serif; font-size:.88rem; font-weight:700; color:var(--morado-intenso); line-height:1.4; }
        .sol-fg { margin-bottom:.85rem; }
        .sol-fg label { display:block; font-size:.68rem; font-weight:700; color:var(--texto-medio); text-transform:uppercase; letter-spacing:.08em; margin-bottom:.3rem; }
        .sol-fg input,.sol-fg select,.sol-fg textarea { width:100%; padding:.72rem .95rem; border:1.5px solid var(--morado-claro); border-radius:10px; font-family:'Inter',sans-serif; font-size:.95rem; color:var(--texto-oscuro); background:#fafafa; outline:none; transition:border-color .2s,box-shadow .2s; -webkit-appearance:none; }
        .sol-fg input:focus,.sol-fg select:focus,.sol-fg textarea:focus { border-color:var(--morado-intenso); box-shadow:0 0 0 3px rgba(166,127,255,.12); background:#fff; }
        .sol-fg textarea { min-height:64px; resize:vertical; line-height:1.5; }
        .sol-g2 { display:grid; grid-template-columns:1fr 1fr; gap:.7rem; }
        .sol-btn { width:100%; padding:.95rem; background:linear-gradient(135deg,var(--rosa-intenso),var(--morado-intenso)); color:#fff; border:none; border-radius:50px; font-family:'Outfit',sans-serif; font-size:1rem; font-weight:700; cursor:pointer; transition:all .2s; box-shadow:0 4px 16px rgba(197,163,255,.45); margin-top:.5rem; display:flex; align-items:center; justify-content:center; gap:.5rem; }
        .sol-btn:disabled { opacity:.55; cursor:not-allowed; }
        .sol-btn:active:not(:disabled) { transform:scale(.98); }
        .sol-spinner { width:16px; height:16px; border:2.5px solid rgba(255,255,255,.35); border-top-color:#fff; border-radius:50%; animation:spin .7s linear infinite; display:none; }
        .sol-exito { text-align:center; padding:2rem 1rem; }
        .sol-exito-ico { font-size:3.5rem; margin-bottom:.75rem; }
        .sol-exito h4 { font-family:'Outfit',sans-serif; font-size:1.3rem; color:var(--morado-intenso); margin-bottom:.5rem; }
        .sol-exito p { font-size:.9rem; color:var(--texto-medio); line-height:1.7; }
        /* ‚îÄ‚îÄ MAPA ‚îÄ‚îÄ */
        .mapa-wrap { width:90%; max-width:1200px; margin:40px auto; padding:15px; background:white; border:1px solid #ddd; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); overflow:hidden; }
        .mapa-wrap iframe { width:100%; height:500px; border:0; display:block; margin:0 auto; }
        .mapa-footer { padding:20px 10px 10px; text-align:center; border-top:1px solid #eee; margin-top:10px; }
        .mapa-footer h3 { margin:0 0 10px; color:#333; font-size:1.4em; }
        .mapa-footer p { margin:0 0 15px; color:#555; }
        .mapa-btn { display:inline-block; padding:12px 30px; background-color:#4285F4; color:white; text-decoration:none; font-size:1.1em; font-weight:bold; border-radius:8px; }
        /* ‚îÄ‚îÄ CONTACTO ‚îÄ‚îÄ */
        .contacto-wrap { max-width:800px; margin:40px auto; padding:20px; background:#f9f9f9; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.08); }
        .contacto-wrap h2 { text-align:center; color:#333; margin-bottom:25px; }
        .contacto-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:25px; text-align:center; }
        .contacto-item { padding:20px; background:white; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.05); }
        .contacto-item strong { font-size:1.2em; display:block; margin-bottom:8px; }
        .contacto-item a { color:#007BFF; font-size:1.1em; text-decoration:none; font-weight:bold; word-break:break-all; }
        .contacto-item p { margin:0; font-size:1.1em; color:#555; }
        /* ‚îÄ‚îÄ SOCIAL ‚îÄ‚îÄ */
        .social-links { display:flex; flex-direction:column; gap:1rem; margin-top:1.5rem; justify-content:center; padding:0 1rem; }
        .social-links a { color:var(--blanco); font-size:1.05rem; text-decoration:none; padding:1rem 2rem; background:linear-gradient(135deg,var(--rosa-intenso),var(--morado-intenso)); border-radius:50px; transition:all 0.3s ease; box-shadow:0 4px 12px rgba(197,163,255,0.4); font-family:'Outfit',sans-serif; font-weight:600; text-align:center; }
        footer { background:var(--morado-intenso); color:var(--blanco); text-align:center; padding:1.5rem 1rem; margin-top:2rem; font-family:'Outfit',sans-serif; font-size:0.9rem; }
        /* ‚îÄ‚îÄ FLOAT ‚îÄ‚îÄ */
        .floating-buttons { position:fixed; bottom:20px; right:20px; display:flex; flex-direction:column; gap:12px; z-index:9999; }
        .whatsapp-float { width:60px; height:60px; background:var(--whatsapp); border-radius:50%; box-shadow:0 4px 20px rgba(37,211,102,0.5); display:flex; align-items:center; justify-content:center; cursor:pointer; transition:all 0.3s ease; text-decoration:none; animation:pulse 2s infinite; }
        .whatsapp-float svg { width:35px; height:35px; fill:white; }
        @keyframes pulse { 0%{box-shadow:0 4px 20px rgba(37,211,102,0.5);}50%{box-shadow:0 4px 30px rgba(37,211,102,0.8);}100%{box-shadow:0 4px 20px rgba(37,211,102,0.5);} }
        .share-float { width:60px; height:60px; background:linear-gradient(135deg,var(--rosa-intenso),var(--morado-intenso)); border-radius:50%; box-shadow:0 4px 20px rgba(166,127,255,0.5); display:flex; align-items:center; justify-content:center; cursor:pointer; transition:all 0.3s ease; border:none; }
        .share-float svg { width:32px; height:32px; fill:white; }
        /* ‚îÄ‚îÄ SHARE MODAL ‚îÄ‚îÄ */
        .share-modal { display:none; position:fixed; z-index:10000; left:0; top:0; width:100%; height:100%; background:rgba(45,42,61,0.9); backdrop-filter:blur(8px); }
        .share-modal-content { background:var(--blanco); margin:20% auto; padding:2rem; border-radius:20px; max-width:90%; width:400px; box-shadow:0 20px 60px rgba(0,0,0,0.3); animation:slideUp 0.4s ease-out; position:relative; }
        .share-modal h3 { font-family:'Outfit',sans-serif; font-size:1.5rem; color:var(--morado-intenso); margin-bottom:1.5rem; text-align:center; }
        .share-options { display:grid; grid-template-columns:repeat(2,1fr); gap:1rem; margin-top:1.5rem; }
        .share-option { background:linear-gradient(135deg,var(--rosa-claro),var(--morado-claro)); padding:1.2rem; border-radius:12px; text-align:center; cursor:pointer; transition:all 0.3s ease; border:none; font-family:'Outfit',sans-serif; font-size:0.9rem; color:var(--texto-oscuro); font-weight:600; }
        .share-option svg { width:32px; height:32px; margin-bottom:0.5rem; fill:var(--morado-intenso); display:block; margin-left:auto; margin-right:auto; }
        #qrCode { text-align:center; margin-top:1rem; padding:1rem; background:var(--rosa-claro); border-radius:12px; display:none; }
        #qrCode canvas { margin:0 auto; display:block; }
        .skel { background:linear-gradient(90deg,#ede8ff 25%,#e8d5ff 50%,#ede8ff 75%); background-size:200% 100%; animation:skelMove 1.5s infinite; border-radius:8px; }
        @keyframes skelMove { 0%{background-position:200% 0;}100%{background-position:-200% 0;} }
        @media (min-width:768px) {
            h1{font-size:2.2rem;} h2{font-size:1.8rem;}
            .hero,.section,.disp-section{max-width:900px;margin-left:auto;margin-right:auto;padding:2.5rem 2rem;}
            .servicios-buttons{grid-template-columns:repeat(2,1fr);gap:2rem;}
            .social-links{flex-direction:row;}
            .modal-content{max-width:700px;padding:2.5rem 2rem;}
            .disp-slots-grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr));}
        }
        @media (min-width:1024px) {
            h1{font-size:2.5rem;} h2{font-size:2rem;}
            .hero,.section,.disp-section{max-width:1200px;padding:3rem 2rem;}
            .servicios-buttons{grid-template-columns:repeat(4,1fr);gap:2rem;}
            .service-card:hover{transform:translateY(-8px);box-shadow:0 16px 40px rgba(197,163,255,0.4);}
            .service-card-button:hover{transform:scale(1.05);}
            .whatsapp-float:hover,.share-float:hover{transform:scale(1.1);}
            .cta-button:hover{transform:translateY(-3px);box-shadow:0 8px 24px rgba(197,163,255,0.6);}
            .floating-buttons{bottom:30px;right:30px;}
            .whatsapp-float,.share-float{width:70px;height:70px;}
            .disp-slot-card:hover{transform:translateY(-4px);box-shadow:0 10px 28px rgba(166,127,255,.3);}
        }
    </style>
</head>
<body>

<header>
    <img id="site-logo" src="" alt="Bienestar Emocional" class="logo" style="display:none;" onerror="this.style.display='none'">
    <h1 id="site-titulo">Bienestar Emocional</h1>
    <p id="site-subtitulo1">Para Ni√±os, adolescentes, adultos, escuelas y empresas.</p>
    <p id="site-subtitulo2">Atenci√≥n clara, Emp√°tica y sin juicios</p>
</header>

<div id="quienes-wrap" style="margin:1.5rem auto;max-width:900px;border-radius:24px;overflow:hidden;box-shadow:0 12px 40px rgba(166,127,255,0.25);animation:fadeInUp 0.8s ease-out;animation-delay:0.15s;animation-fill-mode:both;">
    <div style="position:relative;width:100%;min-height:340px;display:flex;align-items:flex-end;">
        <img id="quienes-img" src="" alt="Consultorio" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;display:none;" onerror="this.style.display='none'">
        <div id="quienes-img-skel" class="skel" style="position:absolute;top:0;left:0;width:100%;height:100%;"></div>
        <div style="position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(to top,rgba(45,26,61,0.88) 0%,rgba(45,26,61,0.55) 50%,rgba(45,26,61,0.10) 100%);"></div>
        <div style="position:relative;z-index:2;padding:2rem 2rem 2.2rem;width:100%;">
            <h2 id="quienes-titulo" style="font-family:'Outfit',sans-serif;font-size:1.7rem;font-weight:700;color:#fff;margin-bottom:0.5rem;text-align:left;text-shadow:0 2px 8px rgba(0,0,0,0.3);">¬øQui√©nes somos?</h2>
            <div style="width:60px;height:4px;background:linear-gradient(90deg,#FF85C0,#C5A3FF);border-radius:2px;margin-bottom:1rem;"></div>
            <p id="quienes-texto" style="font-family:'Inter',sans-serif;font-size:0.97rem;color:rgba(255,255,255,0.92);line-height:1.8;text-shadow:0 1px 4px rgba(0,0,0,0.3);max-width:680px;">Cargando...</p>
        </div>
    </div>
</div>

<div class="hero">
    <h2 id="hero-titulo">En cada uno de nuestros d√≠as se presentan</h2>
    <p id="hero-descripcion">Momentos en los que podemos acompa√±arte...</p>
</div>

<div class="section">
    <h2>Solicitud de Servicios</h2>
    <p style="text-align:center;margin-bottom:1.5rem;font-size:1rem;color:var(--texto-medio);">Selecciona el servicio que necesitas</p>
    <div class="servicios-buttons">
        <div class="service-card" onclick="openModal('Empresas')">
            <img id="card-img-Empresas" src="" alt="Empresas" class="service-card-image" style="display:none;" onerror="this.style.display='none'">
            <div id="card-img-skel-Empresas" class="skel service-card-image"></div>
            <div class="service-card-content"><h3 class="service-card-title">üè¢ Empresas</h3><button class="service-card-button">Ver m√°s informaci√≥n</button></div>
        </div>
        <div class="service-card" onclick="openModal('Escuelas')">
            <img id="card-img-Escuelas" src="" alt="Escuelas" class="service-card-image" style="display:none;" onerror="this.style.display='none'">
            <div id="card-img-skel-Escuelas" class="skel service-card-image"></div>
            <div class="service-card-content"><h3 class="service-card-title">üè´ Escuelas</h3><button class="service-card-button">Ver m√°s informaci√≥n</button></div>
        </div>
        <div class="service-card" onclick="openModal('Infantil')">
            <img id="card-img-Infantil" src="" alt="Ni√±os y Adolescentes" class="service-card-image" style="display:none;" onerror="this.style.display='none'">
            <div id="card-img-skel-Infantil" class="skel service-card-image"></div>
            <div class="service-card-content"><h3 class="service-card-title">üë∂ Ni√±os y Adolescentes</h3><button class="service-card-button">Ver m√°s informaci√≥n</button></div>
        </div>
        <div class="service-card" onclick="openModal('Adultos')">
            <img id="card-img-Adultos" src="" alt="Adultos" class="service-card-image" style="display:none;" onerror="this.style.display='none'">
            <div id="card-img-skel-Adultos" class="skel service-card-image"></div>
            <div class="service-card-content"><h3 class="service-card-title">üë®‚Äçü¶± Adultos</h3><button class="service-card-button">Ver m√°s informaci√≥n</button></div>
        </div>
        <div class="service-card" onclick="openModal('Evaluaciones')" style="grid-column:1/-1;max-width:420px;margin:0 auto;width:100%;">
            <img id="card-img-Evaluaciones" src="" alt="Evaluaciones" class="service-card-image" style="display:none;" onerror="this.style.display='none'">
            <div id="card-img-skel-Evaluaciones" class="skel service-card-image"></div>
            <div class="service-card-content">
                <div class="badge-eval" id="eval-badge" style="display:none;">Nuevo</div>
                <h3 class="service-card-title">üß† Evaluaciones Especializadas</h3>
                <button class="service-card-button">Ver m√°s informaci√≥n</button>
            </div>
        </div>
    </div>
</div>

<div id="modalDinamico" class="modal">
    <div class="modal-content">
        <span class="close" onclick="cerrarModal()">&times;</span>
        <div id="modalCuerpo"><div class="modal-loading"><div class="spinner"></div><p>Cargando informaci√≥n...</p></div></div>
    </div>
</div>

<!-- ‚ïê‚ïê AGENDA CTA ‚ïê‚ïê -->
<div style="text-align:center;margin:2rem 1rem;position:relative;z-index:1;">
    <a href="disponibilidad.html" style="
        display:inline-flex;align-items:center;gap:.75rem;
        background:linear-gradient(135deg,#FF85C0,#A67FFF);
        color:#fff;text-decoration:none;
        padding:1.1rem 2.2rem;border-radius:50px;
        font-family:'Outfit',sans-serif;font-size:1.05rem;font-weight:700;
        box-shadow:0 8px 28px rgba(166,127,255,.45);
        transition:all .25s ease;
        animation:pulse-cta 2.5s ease-in-out infinite;
    ">
        üìÖ Ver d√≠as disponibles
        <span style="background:rgba(255,255,255,.25);border-radius:50px;padding:.15rem .6rem;font-size:.78rem;">Agendar ‚Üí</span>
    </a>
    <p style="margin-top:.8rem;font-size:.82rem;color:#5A5570;">Selecciona el d√≠a y horario que mejor te acomode</p>
</div>
<style>
@keyframes pulse-cta{
  0%,100%{box-shadow:0 8px 28px rgba(166,127,255,.45);}
  50%{box-shadow:0 8px 36px rgba(166,127,255,.75);}
}
</style>

<!-- ‚ïê‚ïê MODAL SOLICITUD ‚Äî oculto, reservado para uso futuro ‚ïê‚ïê -->
<div id="solOverlay" class="sol-overlay" style="display:none!important;" onclick="cerrarSolicitud(event)">
    <div class="sol-box" onclick="event.stopPropagation()">
        <button class="sol-close" onclick="cerrarSolicitud(null)">‚úï</button>
        <div id="sol-form-body">
            <div class="sol-titulo">üìÖ Solicitar cita</div>
            <div class="sol-subtitulo">Completa tus datos y te confirmaremos tu cita a la brevedad.</div>
            <div class="sol-slot-resumen">
                <div class="sol-slot-ico">üóìÔ∏è</div>
                <div class="sol-slot-info" id="sol-slot-txt">‚Äî</div>
            </div>
            <div class="sol-fg"><label>Nombre completo *</label><input type="text" id="sol-nombre" placeholder="Tu nombre completo"></div>
            <div class="sol-g2">
                <div class="sol-fg"><label>Tel√©fono / WhatsApp *</label><input type="tel" id="sol-telefono" placeholder="4421234567"></div>
                <div class="sol-fg"><label>Correo electr√≥nico</label><input type="email" id="sol-correo" placeholder="correo@ejemplo.com"></div>
            </div>
            <div class="sol-fg">
                <label>Servicio de inter√©s</label>
                <select id="sol-servicio">
                    <option value="">‚Äî Seleccionar ‚Äî</option>
                    <option>Empresas</option><option>Escuelas</option>
                    <option>Ni√±os y Adolescentes</option><option>Adultos</option><option>Evaluaciones</option>
                </select>
            </div>
            <div class="sol-fg">
                <label>Motivo o comentario <span style="font-weight:400;font-size:.75rem;color:var(--texto-medio);">(opcional)</span></label>
                <textarea id="sol-motivo" placeholder="Cu√©ntanos brevemente el motivo de tu consulta..."></textarea>
            </div>
            <button class="sol-btn" id="sol-btn-enviar" onclick="enviarSolicitud()">
                <span id="sol-btn-txt">Enviar solicitud</span>
                <span class="sol-spinner" id="sol-spinner"></span>
            </button>
        </div>
        <div id="sol-exito-body" style="display:none;">
            <div class="sol-exito">
                <div class="sol-exito-ico">‚úÖ</div>
                <h4>¬°Solicitud enviada!</h4>
                <p>Tu solicitud fue recibida. Te contactaremos pronto para confirmar tu cita.<br><br>Revisa tu WhatsApp y correo para m√°s detalles.</p>
                <button class="sol-btn" style="margin-top:1.5rem;" onclick="cerrarSolicitud(null)">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<div class="mapa-wrap">
    <iframe id="mapa-iframe" src="" allowfullscreen="" loading="lazy"></iframe>
    <div class="mapa-footer">
        <h3>C√≥mo llegar</h3>
        <p>Haz clic abajo para ver indicaciones en Google Maps.</p>
        <a id="mapa-btn" href="#" target="_blank" class="mapa-btn">C√≥mo llegar aqu√≠ ‚Üí</a>
    </div>
</div>

<div class="contacto-wrap">
    <h2 style="font-family:'Outfit',sans-serif;">Contacto</h2>
    <div class="contacto-grid">
        <div class="contacto-item"><strong>üìû Tel√©fono</strong><a id="ctc-tel-link" href="tel:4425839311">442 583 9311</a></div>
        <div class="contacto-item"><strong>üìß Correo</strong><a id="ctc-email-link" href="mailto:Bienestaremocional58@gmail.com">Bienestaremocional58@gmail.com</a></div>
        <div class="contacto-item"><strong>üïê Horario</strong><p id="ctc-horario-txt">12:00 pm a 6:00 pm</p></div>
    </div>
</div>

<div class="social-links">
    <a id="link-facebook" href="#" target="_blank">üìò Facebook</a>
    <a id="link-instagram" href="#" target="_blank">üì∑ Instagram</a>
</div>

<footer>
    <p id="footer-texto">&copy; 2025 Bienestar Emocional. Todos los derechos reservados.</p>
</footer>

<div class="floating-buttons">
    <button class="share-float" onclick="openShareModal()" aria-label="Compartir">
        <svg viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/></svg>
    </button>
    <a id="wa-float-link" href="#" class="whatsapp-float" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp">
        <svg viewBox="0 0 32 32"><path d="M16 0C7.164 0 0 7.164 0 16c0 2.825.738 5.607 2.137 8.058L.069 31.488l7.695-2.01A15.87 15.87 0 0016 32c8.836 0 16-7.164 16-16S24.836 0 16 0zm8.28 22.663c-.36.981-2.106 1.8-2.898 1.92-.77.12-1.588.173-2.564-.165a23.726 23.726 0 01-2.322-.857c-4.08-1.77-6.736-5.93-6.944-6.204-.208-.273-1.705-2.292-1.705-4.374 0-2.082 1.073-3.104 1.456-3.527.384-.423.837-.53 1.116-.53.28 0 .558.003.803.015.26.013.606-.098.95.723.344.82 1.174 2.903 1.278 3.115.104.212.173.46.034.733-.139.273-.208.442-.415.681-.207.24-.435.535-.621.72-.207.205-.422.427-.182.838.24.41 1.07 1.782 2.298 2.888 1.58 1.423 2.912 1.868 3.327 2.08.415.212.657.177.9-.107.243-.284.953-1.13 1.208-1.518.254-.39.508-.325.86-.195.35.13 2.23 1.062 2.612 1.255.383.192.638.287.734.445.096.158.096.915-.264 1.896z"/></svg>
    </a>
</div>

<div id="shareModal" class="share-modal">
    <div class="share-modal-content">
        <span class="close" onclick="closeShareModal()">&times;</span>
        <h3>üì§ Compartir P√°gina</h3>
        <div class="share-options">
            <button class="share-option" onclick="shareWhatsApp()"><svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>WhatsApp</button>
            <button class="share-option" onclick="shareEmail()"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>Email</button>
            <button class="share-option" onclick="copyLink()"><svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>Copiar Link</button>
            <button class="share-option" onclick="generateQR()"><svg viewBox="0 0 24 24"><path d="M3 11h8V3H3v8zm2-6h4v4H5V5zM3 21h8v-8H3v8zm2-6h4v4H5v-4zM13 3v8h8V3h-8zm6 6h-4V5h4v4zM13 13h2v2h-2zM15 15h2v2h-2zM13 17h2v2h-2zM15 19h2v2h-2zM17 17h2v2h-2zM17 13h2v2h-2zM19 15h2v2h-2zM19 19h2v2h-2z"/></svg>C√≥digo QR</button>
        </div>
        <div id="qrCode"></div>
    </div>
</div>

<script>
// ‚úÖ URL ACTUALIZADA ‚Äî Apps Script v5
var PROXY_URL = 'https://script.google.com/macros/s/AKfycbw33rJe4JWLUnSHYuRuf4x_FW90YKMA-i2PEHXCoJwqYmUcih90NVV9JpUe_i0jrQli/exec';
var SITE_URL  = 'https://bienestaremocionalwepapp-code.github.io/Bienestar-Emocional-Online/';

var cache = {};
var slotSeleccionado = null;
var contactoAdmin = {};

var DIAS  = ['Domingo','Lunes','Martes','Mi√©rcoles','Jueves','Viernes','S√°bado'];
var MESES = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];

function fetchTab(tab) {
    if (cache[tab]) return Promise.resolve(cache[tab]);
    return fetch(PROXY_URL + '?tab=' + encodeURIComponent(tab), { redirect:'follow' })
        .then(function(r){ return r.text(); })
        .then(function(t){
            var j = JSON.parse(t);
            if (!j.ok) throw new Error(j.error || 'Error');
            cache[tab] = j.data;
            return j.data;
        });
}

function apiPost(action, payload) {
    return fetch(PROXY_URL, {
        method:'POST', redirect:'follow',
        headers:{'Content-Type':'text/plain'},
        body: JSON.stringify(Object.assign({action:action}, payload))
    }).then(function(r){ return r.text(); })
      .then(function(t){ var j=JSON.parse(t); if(!j.ok) throw new Error(j.error||'Error'); return j; });
}

document.addEventListener('DOMContentLoaded', function() {
    loadConfig();
    loadContacto();
    loadMapa();
    preloadServiceImages();
});

function loadConfig() {
    fetchTab('Config').then(function(d) {
        setTxt('site-titulo', d.titulo);
        setTxt('site-subtitulo1', d.subtitulo1);
        setTxt('site-subtitulo2', d.subtitulo2);
        if (d.logo_url) { var l=document.getElementById('site-logo'); l.src=d.logo_url; l.style.display='block'; }
        setTxt('quienes-titulo', d.quienes_titulo);
        setTxt('quienes-texto', d.quienes_texto);
        if (d.quienes_imagen) {
            var img=document.getElementById('quienes-img'), sk=document.getElementById('quienes-img-skel');
            img.src=d.quienes_imagen;
            img.onload=function(){ img.style.display='block'; sk.style.display='none'; };
            img.onerror=function(){ sk.style.display='none'; };
        } else { document.getElementById('quienes-img-skel').style.display='none'; }
        setTxt('hero-titulo', d.hero_titulo);
        setTxt('hero-descripcion', d.hero_descripcion);
        setTxt('footer-texto', '\u00A9 ' + d.footer_texto);
    }).catch(function(e){ console.warn('Config:', e.message); });
}

function loadContacto() {
    fetchTab('Contacto').then(function(d) {
        contactoAdmin = d;
        if (d.telefono) {
            var tel=document.getElementById('ctc-tel-link');
            tel.href='tel:'+d.telefono;
            tel.textContent=d.telefono.replace(/(\d{3})(\d{3})(\d{4})/,'$1 $2 $3');
        }
        if (d.correo) { var m=document.getElementById('ctc-email-link'); m.href='mailto:'+d.correo; m.textContent=d.correo; }
        setTxt('ctc-horario-txt', d.horario);
        if (d.facebook)  document.getElementById('link-facebook').href=d.facebook;
        if (d.instagram) document.getElementById('link-instagram').href=d.instagram;
        if (d.telefono) {
            var msg=encodeURIComponent(d.whatsapp_mensaje||'Hola, me gustar√≠a obtener informaci√≥n sobre sus servicios');
            document.getElementById('wa-float-link').href='https://wa.me/'+d.telefono+'?text='+msg;
        }
    }).catch(function(e){ console.warn('Contacto:', e.message); });
}

function loadMapa() {
    fetchTab('Mapa').then(function(d) {
        if (d.embed_url) document.getElementById('mapa-iframe').src=d.embed_url;
        if (d.latitud && d.longitud) {
            var btn=document.getElementById('mapa-btn');
            btn.href='https://www.google.com/maps/dir/?api=1&destination='+d.latitud+','+d.longitud+'&travelmode=driving';
            btn.textContent=d.boton_texto||'C√≥mo llegar aqu√≠ ‚Üí';
        }
    }).catch(function(e){ console.warn('Mapa:', e.message); });
}

function preloadServiceImages() {
    ['Empresas','Escuelas','Infantil','Adultos','Evaluaciones'].forEach(function(tab) {
        fetchTab(tab).then(function(d) {
            cache[tab]=d;
            var imgEl=document.getElementById('card-img-'+tab), skelEl=document.getElementById('card-img-skel-'+tab);
            if (d.imagen && imgEl) {
                imgEl.src=d.imagen;
                imgEl.onload=function(){ imgEl.style.display='block'; if(skelEl)skelEl.style.display='none'; };
                imgEl.onerror=function(){ if(skelEl)skelEl.style.display='none'; };
            } else { if(skelEl)skelEl.style.display='none'; }
            if (tab==='Evaluaciones'&&d.badge){ var b=document.getElementById('eval-badge'); b.textContent=d.badge; b.style.display='inline-block'; }
        }).catch(function(e){ console.warn(tab+':', e.message); });
    });
}


// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  MODAL SOLICITUD
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function abrirSolicitud(slot, dia, num, mes) {
    slotSeleccionado = slot;
    document.getElementById('sol-slot-txt').textContent =
        dia + ' ' + num + ' de ' + mes +
        '  ¬∑  ' + (slot.hora_inicio||'') + (slot.hora_fin ? ' ‚Äì '+slot.hora_fin : '') +
        (slot.nota ? '  ¬∑  '+slot.nota : '');
    ['sol-nombre','sol-telefono','sol-correo','sol-motivo'].forEach(function(id){ document.getElementById(id).value=''; });
    document.getElementById('sol-servicio').value = '';
    document.getElementById('sol-form-body').style.display  = '';
    document.getElementById('sol-exito-body').style.display = 'none';
    document.getElementById('sol-btn-txt').textContent = 'Enviar solicitud';
    document.getElementById('sol-spinner').style.display = 'none';
    document.getElementById('sol-btn-enviar').disabled = false;
    setTimeout(function(){
        document.getElementById('solOverlay').classList.add('show');
        document.body.style.overflow = 'hidden';
    }, 10);
}

function cerrarSolicitud(e) {
    if (e && e.target !== document.getElementById('solOverlay')) return;
    document.getElementById('solOverlay').classList.remove('show');
    document.body.style.overflow = '';
    slotSeleccionado = null;
}

function enviarSolicitud() {
    var nombre   = document.getElementById('sol-nombre').value.trim();
    var telefono = document.getElementById('sol-telefono').value.trim();
    if (!nombre)   { alert('Por favor ingresa tu nombre.'); return; }
    if (!telefono) { alert('Por favor ingresa tu tel√©fono.'); return; }
    var btn = document.getElementById('sol-btn-enviar');
    btn.disabled = true;
    document.getElementById('sol-btn-txt').textContent = 'Enviando...';
    document.getElementById('sol-spinner').style.display = 'inline-block';
    var slot  = slotSeleccionado || {};
    var datos = {
        nombre:nombre, telefono:telefono,
        correo:  document.getElementById('sol-correo').value.trim(),
        servicio:document.getElementById('sol-servicio').value,
        motivo:  document.getElementById('sol-motivo').value.trim(),
        fecha: slot.fecha||'', hora_inicio:slot.hora_inicio||'',
        hora_fin:slot.hora_fin||'', nota:slot.nota||''
    };
    apiPost('createCita', { data:{
        id:'', fecha:datos.fecha, hora:datos.hora_inicio,
        nombre:datos.nombre, telefono:datos.telefono,
        correo:datos.correo, servicio:datos.servicio,
        motivo:datos.motivo, estado:'Pendiente'
    }})
    .then(function(){
        return apiPost('enviarCorreoSolicitud', {data:datos}).catch(function(){});
    })
    .then(function(){
        notificarWhatsAppAdmin(datos);
        document.getElementById('sol-form-body').style.display  = 'none';
        document.getElementById('sol-exito-body').style.display = '';
    })
    .catch(function(){
        alert('Ocurri√≥ un error. Por favor intenta de nuevo.');
        btn.disabled = false;
        document.getElementById('sol-btn-txt').textContent = 'Enviar solicitud';
        document.getElementById('sol-spinner').style.display = 'none';
    });
}

function notificarWhatsAppAdmin(datos) {
    var tel = (contactoAdmin.telefono||'').replace(/\D/g,'');
    if (!tel) return;
    if (tel.length===10) tel = '52'+tel;
    var msg = 'üîî *Nueva solicitud de cita*\n\n'
        + 'üë§ *Paciente:* '  + datos.nombre    + '\n'
        + 'üì± *Tel√©fono:* '  + datos.telefono  + '\n'
        + (datos.correo   ? 'üìß *Correo:* '   + datos.correo   + '\n' : '')
        + 'üìÖ *Fecha:* '     + formatFechaLabel(datos.fecha)    + '\n'
        + 'üïê *Horario:* '   + datos.hora_inicio + (datos.hora_fin ? ' ‚Äì '+datos.hora_fin : '') + '\n'
        + (datos.servicio ? 'üè∑Ô∏è *Servicio:* ' + datos.servicio + '\n' : '')
        + (datos.motivo   ? 'üìù *Motivo:* '   + datos.motivo   + '\n' : '')
        + '\n_Registrada como Pendiente en la agenda._';
    window.open('https://wa.me/'+tel+'?text='+encodeURIComponent(msg), '_blank');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  MODAL SERVICIOS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openModal(pestana) {
    var modal=document.getElementById('modalDinamico'), cuerpo=document.getElementById('modalCuerpo');
    cuerpo.innerHTML='<div class="modal-loading"><div class="spinner"></div><p>Cargando informaci√≥n...</p></div>';
    modal.style.display='block'; document.body.style.overflow='hidden';
    fetchTab(pestana)
        .then(function(data){ cuerpo.innerHTML=buildModalHTML(data); })
        .catch(function(){ cuerpo.innerHTML='<p style="color:red;text-align:center;">‚ö†Ô∏è No se pudo cargar la informaci√≥n.</p>'; });
}

function buildModalHTML(d) {
    var servicios=[],temas=[],i=1;
    while(d['servicio_'+i]){servicios.push(d['servicio_'+i]);i++;}
    i=1;
    while(d['tema_'+i]){temas.push(d['tema_'+i]);i++;}
    var esEval=temas.some(function(t){return t.indexOf('Personalidad')>-1||t.indexOf('Conducta')>-1;});
    var temasHTML=esEval
        ?'<div class="eval-areas-grid">'+temas.map(function(t){return'<div class="eval-area-item">'+t+'</div>';}).join('')+'</div>'
        :'<ul>'+temas.map(function(t){return'<li>'+t+'</li>';}).join('')+'</ul>';
    return (d.imagen?'<img src="'+d.imagen+'" alt="" class="modal-image" onerror="this.style.display=\'none\'">':'')
        +(d.badge?'<div style="margin-bottom:.7rem;"><span class="badge-eval">'+d.badge+'</span></div>':'')
        +'<h3>'+(d.titulo||'')+'</h3><p>'+(d.intro||'')+'</p>'
        +(servicios.length?'<span class="modal-section-label">'+(d.servicios_titulo||'Servicios:')+'</span><ul>'+servicios.map(function(s){return'<li>'+s+'</li>';}).join('')+'</ul>':'')
        +(temas.length?'<span class="modal-section-label">'+(d.temas_titulo||'Temas:')+'</span>'+temasHTML:'')
        +(d.modalidad?'<p><strong>Modalidad:</strong> '+d.modalidad+'</p>':'')
        +'<a href="'+(d.cta_url||'#')+'" target="_blank" class="cta-button">'+(d.cta_texto||'Contactar')+'</a>';
}

function cerrarModal() { document.getElementById('modalDinamico').style.display='none'; document.body.style.overflow='auto'; }

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  SHARE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openShareModal()  { document.getElementById('shareModal').style.display='block'; document.getElementById('qrCode').style.display='none'; document.getElementById('qrCode').innerHTML=''; }
function closeShareModal() { document.getElementById('shareModal').style.display='none'; }
function shareWhatsApp()   { window.open('https://wa.me/?text='+encodeURIComponent('Conoce Bienestar Emocional - Servicios de psicolog√≠a profesional '+SITE_URL),'_blank'); }
function shareEmail()      { window.location.href='mailto:?subject='+encodeURIComponent('Te comparto: Bienestar Emocional')+'&body='+encodeURIComponent('Hola,\n\nTe comparto:\n\n'+SITE_URL+'\n\n¬°Saludos!'); }
function copyLink()        { navigator.clipboard?navigator.clipboard.writeText(SITE_URL).then(function(){alert('‚úÖ Enlace copiado');}):copyFallback(); }
function copyFallback()    { var t=document.createElement('textarea');t.value=SITE_URL;document.body.appendChild(t);t.select();document.execCommand('copy');document.body.removeChild(t);alert('‚úÖ Enlace copiado'); }
function generateQR() {
    var q=document.getElementById('qrCode');
    q.innerHTML='<p style="margin-bottom:1rem;color:var(--morado-intenso);font-weight:600;">Escanea el c√≥digo QR:</p>';
    q.style.display='block';
    var d=document.createElement('div');q.appendChild(d);
    new QRCode(d,{text:SITE_URL,width:200,height:200,colorDark:'#000000',colorLight:'#FFFFFF',correctLevel:QRCode.CorrectLevel.H});
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//  UTILIDADES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function fmtDate(d){ return d.getFullYear()+'-'+pad(d.getMonth()+1)+'-'+pad(d.getDate()); }
function pad(n){ return String(n).padStart(2,'0'); }
function escHtml(s){ return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
function setTxt(id,val){ var el=document.getElementById(id); if(el&&val)el.textContent=val; }
function formatFechaLabel(dateStr) {
    if (!dateStr) return '‚Äî';
    var p=dateStr.split('-'), d=new Date(dateStr+'T12:00:00');
    return DIAS[d.getDay()]+' '+parseInt(p[2])+' de '+MESES[parseInt(p[1])-1];
}

window.onclick = function(e) {
    if (e.target.id==='modalDinamico') cerrarModal();
    if (e.target.classList.contains('share-modal')) closeShareModal();
};
document.addEventListener('keydown',function(e){
    if(e.key==='Escape'){ cerrarModal(); closeShareModal(); document.getElementById('solOverlay').classList.remove('show'); document.body.style.overflow=''; }
});
</script>

<script>
(function(){
    var taps=0, timer;
    var EDITOR_URL='https://bienestaremocionalwepapp-code.github.io/editor-bienestar-emocional-online/';
    document.getElementById('site-logo').addEventListener('click',function(e){
        e.preventDefault(); taps++; clearTimeout(timer);
        timer=setTimeout(function(){taps=0;},1500);
        if(taps>=5){taps=0;window.open(EDITOR_URL,'_blank');}
    });
})();
</script>
</body>
</html>
